{"id":"node_modules/@1hive/radspec/dist/index.js","dependencies":[{"name":"/home/agevi/chui Organisation/pennify-aragon/node_modules/@1hive/radspec/dist/index.js.map","includedInParent":true,"mtime":1682941398899},{"name":"/home/agevi/chui Organisation/pennify-aragon/package.json","includedInParent":true,"mtime":1682968105152},{"name":"/home/agevi/chui Organisation/pennify-aragon/node_modules/@1hive/radspec/package.json","includedInParent":true,"mtime":1682941398899},{"name":"@babel/runtime/helpers/interopRequireDefault","loc":{"line":1,"column":48,"index":48},"parent":"/home/agevi/chui Organisation/pennify-aragon/node_modules/@1hive/radspec/dist/index.js","resolved":"/home/agevi/chui Organisation/pennify-aragon/node_modules/@babel/runtime/helpers/interopRequireDefault.js"},{"name":"@babel/runtime/helpers/defineProperty","loc":{"line":1,"column":584,"index":584},"parent":"/home/agevi/chui Organisation/pennify-aragon/node_modules/@1hive/radspec/dist/index.js","resolved":"/home/agevi/chui Organisation/pennify-aragon/node_modules/@babel/runtime/helpers/defineProperty.js"},{"name":"@babel/runtime/helpers/objectWithoutProperties","loc":{"line":1,"column":683,"index":683},"parent":"/home/agevi/chui Organisation/pennify-aragon/node_modules/@1hive/radspec/dist/index.js","resolved":"/home/agevi/chui Organisation/pennify-aragon/node_modules/@babel/runtime/helpers/objectWithoutProperties.js"},{"name":"./data","loc":{"line":1,"column":748,"index":748},"parent":"/home/agevi/chui Organisation/pennify-aragon/node_modules/@1hive/radspec/dist/index.js","resolved":"/home/agevi/chui Organisation/pennify-aragon/node_modules/@1hive/radspec/dist/data/index.js"},{"name":"ethers","loc":{"line":1,"column":774,"index":774},"parent":"/home/agevi/chui Organisation/pennify-aragon/node_modules/@1hive/radspec/dist/index.js","resolved":"/home/agevi/chui Organisation/pennify-aragon/node_modules/ethers/lib.esm/index.js"},{"name":"./helpers","loc":{"line":1,"column":801,"index":801},"parent":"/home/agevi/chui Organisation/pennify-aragon/node_modules/@1hive/radspec/dist/index.js","resolved":"/home/agevi/chui Organisation/pennify-aragon/node_modules/@1hive/radspec/dist/helpers/index.js"},{"name":"./lib","loc":{"line":1,"column":827,"index":827},"parent":"/home/agevi/chui Organisation/pennify-aragon/node_modules/@1hive/radspec/dist/index.js","resolved":"/home/agevi/chui Organisation/pennify-aragon/node_modules/@1hive/radspec/dist/lib/index.js"},{"name":"./parser","loc":{"line":1,"column":852,"index":852},"parent":"/home/agevi/chui Organisation/pennify-aragon/node_modules/@1hive/radspec/dist/index.js","resolved":"/home/agevi/chui Organisation/pennify-aragon/node_modules/@1hive/radspec/dist/parser/index.js"},{"name":"./scanner","loc":{"line":1,"column":881,"index":881},"parent":"/home/agevi/chui Organisation/pennify-aragon/node_modules/@1hive/radspec/dist/index.js","resolved":"/home/agevi/chui Organisation/pennify-aragon/node_modules/@1hive/radspec/dist/scanner/index.js"}],"generated":{"js":"\"use strict\";var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");const _excluded=[\"userHelpers\",\"userFunctions\"];Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=void 0,exports.evaluate=evaluate,Object.defineProperty(exports,\"evaluateRaw\",{enumerable:!0,get:function(){return _lib.evaluateRaw}}),Object.defineProperty(exports,\"parse\",{enumerable:!0,get:function(){return _parser.parse}}),Object.defineProperty(exports,\"scan\",{enumerable:!0,get:function(){return _scanner.scan}});var _defineProperty2=_interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\")),_objectWithoutProperties2=_interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\")),_data=require(\"./data\"),_ethers=require(\"ethers\"),_helpers=require(\"./helpers\"),_lib=require(\"./lib\"),_parser=require(\"./parser\"),_scanner=require(\"./scanner\");function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null==arguments[i]?{}:arguments[i],i%2?ownKeys(Object(source),!0).forEach(function(key){(0,_defineProperty2.default)(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))});return target}/**\n * Evaluate a radspec expression (`source`) for a transaction (`call`)\n *\n * @example\n * import * as radspec from 'radspec'\n *\n * const expression = 'Will multiply `a` by 7 and return `a * 7`.'\n * const call = {\n *   abi: ['function multiply(uint256 a) public view returns(uint256)'],\n *   transaction: {\n *     to: '0x8521742d3f456bd237e312d6e30724960f72517a',\n *     data: '0xc6888fa1000000000000000000000000000000000000000000000000000000000000007a'\n *   }\n * }\n *\n * radspec.evaluate(expression, call)\n *   .then(console.log) // => \"Will multiply 122 by 7 and return 854.\"\n * @param {string} source The radspec expression\n * @param {Object} call The call that determines the bindings for this evaluation\n * @param {Array} call.abi The ABI used to decode the transaction data\n * @param {Object} call.transaction The transaction to decode for this evaluation\n * @param {string} call.transaction.to The destination address for this transaction\n * @param {string} call.transaction.data The transaction data\n * @param {?Object} options An options object\n * @param {?ethersProvider.Provider} options.provider EIP 1193 provider\n * @param {?Object} options.userHelpers User defined helpers\n * @param {?Object} options.userFunctions User defined function signatures\n * @return {Promise<string>} The result of the evaluation\n */function evaluate(source,call){let _ref=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},{userHelpers={},userFunctions={}}=_ref,options=(0,_objectWithoutProperties2.default)(_ref,_excluded);// Create ethers interface object\nconst ethersInterface=new _ethers.utils.Interface(call.abi),{args,functionFragment}=ethersInterface.parseTransaction(call.transaction),parameters=functionFragment.inputs.reduce((parameters,input)=>_objectSpread({[input.name]:{type:input.type,value:args[input.name]}},parameters),{}),availableHelpers=_objectSpread(_objectSpread({},_helpers.defaultHelpers),userHelpers),availableFunctions=_objectSpread(_objectSpread({},_data.knownFunctions),userFunctions),{from,to,value,data}=call.transaction;// Parse as an ethers TransactionDescription\n// Evaluate expression with bindings from the transaction data\nreturn(0,_lib.evaluateRaw)(source,parameters,_objectSpread(_objectSpread({},options),{},{availableHelpers,availableFunctions,from,to,value,data}))}var _default=evaluate;exports.default=_default;\n"},"sourceMaps":{"js":{"version":3,"sources":["../src/index.js"],"names":["evaluate","source","call","userHelpers","userFunctions","options","ethersInterface","ethersUtils","Interface","abi","args","functionFragment","parseTransaction","transaction","parameters","inputs","reduce","input","name","type","value","availableHelpers","defaultHelpers","availableFunctions","knownFunctions","from","to","data"],"mappings":"2oDAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GACA,QAASA,CAAAA,QAAT,CAAmBC,MAAnB,CAA2BC,IAA3B,CAA4F,iEAAJ,EAAI,CAA3D,CAAEC,WAAW,CAAG,EAAhB,CAAoBC,aAAa,CAAG,EAApC,CAA2D,MAAhBC,OAAgB,uDAC1F;AAD0F,KAEpFC,CAAAA,eAAe,CAAG,GAAIC,eAAYC,SAAhB,CAA0BN,IAAI,CAACO,GAA/B,CAFkE,CAKpF,CAAEC,IAAF,CAAQC,gBAAR,EAA6BL,eAAe,CAACM,gBAAhB,CACjCV,IAAI,CAACW,WAD4B,CALuD,CASpFC,UAAU,CAAGH,gBAAgB,CAACI,MAAjB,CAAwBC,MAAxB,CACjB,CAACF,UAAD,CAAaG,KAAb,kBACE,CAACA,KAAK,CAACC,IAAP,EAAc,CACZC,IAAI,CAAEF,KAAK,CAACE,IADA,CAEZC,KAAK,CAAEV,IAAI,CAACO,KAAK,CAACC,IAAP,CAFC,CADhB,EAKKJ,UALL,CADiB,CAQjB,EARiB,CATuE,CAoBpFO,gBAAgB,gCAAQC,uBAAR,EAA2BnB,WAA3B,CApBoE,CAsBpFoB,kBAAkB,gCAAQC,oBAAR,EAA2BpB,aAA3B,CAtBkE,CAyBpF,CAAEqB,IAAF,CAAQC,EAAR,CAAYN,KAAZ,CAAmBO,IAAnB,EAA4BzB,IAAI,CAACW,WAzBmD,CAI1F;AAuBA;AACA,MAAO,qBAAYZ,MAAZ,CAAoBa,UAApB,gCACFT,OADE,MAELgB,gBAFK,CAGLE,kBAHK,CAILE,IAJK,CAKLC,EALK,CAMLN,KANK,CAOLO,IAPK,GASR,C,aAEc3B,Q","sourcesContent":["import { knownFunctions } from './data'\n\n/**\n * @typedef {Object} Binding\n * @property {string} type The type of the binding (a valid Radspec type)\n * @property {*} value The value of the binding\n */\n/**\n * @typedef {Object.<string, Binding>} Bindings\n */\n\n/**\n * @module radspec\n */\nimport { utils as ethersUtils } from 'ethers'\nimport { defaultHelpers } from './helpers'\nimport { evaluateRaw } from './lib'\n\n/**\n * Evaluate a radspec expression (`source`) for a transaction (`call`)\n *\n * @example\n * import * as radspec from 'radspec'\n *\n * const expression = 'Will multiply `a` by 7 and return `a * 7`.'\n * const call = {\n *   abi: ['function multiply(uint256 a) public view returns(uint256)'],\n *   transaction: {\n *     to: '0x8521742d3f456bd237e312d6e30724960f72517a',\n *     data: '0xc6888fa1000000000000000000000000000000000000000000000000000000000000007a'\n *   }\n * }\n *\n * radspec.evaluate(expression, call)\n *   .then(console.log) // => \"Will multiply 122 by 7 and return 854.\"\n * @param {string} source The radspec expression\n * @param {Object} call The call that determines the bindings for this evaluation\n * @param {Array} call.abi The ABI used to decode the transaction data\n * @param {Object} call.transaction The transaction to decode for this evaluation\n * @param {string} call.transaction.to The destination address for this transaction\n * @param {string} call.transaction.data The transaction data\n * @param {?Object} options An options object\n * @param {?ethersProvider.Provider} options.provider EIP 1193 provider\n * @param {?Object} options.userHelpers User defined helpers\n * @param {?Object} options.userFunctions User defined function signatures\n * @return {Promise<string>} The result of the evaluation\n */\nfunction evaluate (source, call, { userHelpers = {}, userFunctions = {}, ...options } = {}) {\n  // Create ethers interface object\n  const ethersInterface = new ethersUtils.Interface(call.abi)\n\n  // Parse as an ethers TransactionDescription\n  const { args, functionFragment } = ethersInterface.parseTransaction(\n    call.transaction\n  )\n\n  const parameters = functionFragment.inputs.reduce(\n    (parameters, input) => ({\n      [input.name]: {\n        type: input.type,\n        value: args[input.name]\n      },\n      ...parameters\n    }),\n    {}\n  )\n\n  const availableHelpers = { ...defaultHelpers, ...userHelpers }\n\n  const availableFunctions = { ...knownFunctions, ...userFunctions }\n\n  // Get additional options\n  const { from, to, value, data } = call.transaction\n\n  // Evaluate expression with bindings from the transaction data\n  return evaluateRaw(source, parameters, {\n    ...options,\n    availableHelpers,\n    availableFunctions,\n    from,\n    to,\n    value,\n    data\n  })\n}\n\nexport default evaluate\nexport { evaluate, evaluateRaw }\n\n// Re-export some commonly used inner functionality\nexport { parse } from './parser'\nexport { scan } from './scanner'\n"],"file":"index.js"}},"error":null,"hash":"a0de6decd20a0204c04975d6b67ef20c","cacheData":{"env":{}}}